extends layout

block content
  .row
    div(class="col-md-8 col-sm-12 col-xs-12 main-container")
      ul(class="flex-container")
        div(class="alert alert-info col-md-8 col-sm-12 col-xs-12 alert-box", id="email-alert-box")
          a(href="#", class="close", data-dismiss="alert", aria-label="close") &times;
          p THE EMAIIL HAS BEEN SENT. THANK YOU!

        script.
          if(!{email_sent} == true)
            document.getElementById("email-alert-box").style.display = "block";

    div(class="col-md-8 col-sm-12 col-xs-12 main-container")
      ul(class="flex-container")
        article(class="flex-item col-md-12")
          h2.main-titles Contact

          .about-body.col-md-12
            p 
              | Are you looking to get featured on Code Like Ninja?
              | Do you have a cool product that you want to share with our readers?
              | We are currently looking for companies that are willing to participate in competitions and 
              | giveaways here on Code Like Ninja  have an interesting Kickstarter campaign going on then please 
              | let us know!. Our competitions are hugely popular with our readers and we promote across the 
              | blog, Facebook, Twitter and also soon Instagram.

              h4 Please fill out the form below and we will get back to you as soon as possible.
              form(role="form", method="post", action="/contact_us")
                div(class="form-group")
                  label(for="cont_name") Your Name*
                  input(type="text", class="form-control",name="cont_name", id="cont_name", placeholder="Name")
                div(class="form-group")
                  label(for="cont_email") Your Email*
                  input(type="text", class="form-control",name="cont_email", id="cont_email", placeholder="Email", onchange="checkEmail()")
                  h5 Please add your authentic email address so we could make contact with you.
                  div(class="alert alert-danger col-md-8 col-sm-12 col-xs-12 incorrect-alert-box", id = "email-alert")
                    p Invalid Email-id 
                div(class="form-group")
                  label(for="cont_category") Category
                  select(class="form-control",name="cont_category", id="cont_category")
                    option(value="CLN tip") I have a cool tip!
                    option(value="CLN bug") Somethings not right!
                    option(value="CLN greeting") Just wanted to say hi!
                  h5 Please choose the appropriate subject so we can deal with your message faster.
                div(class="form-group")
                  label(for="cont_descr") Description
                  textarea(rows="10", class="form-control",name="cont_descr", id="cont_descr")  
                  h5 Enter your desired message/feedback or complaint.
                button(type=submit, class="mycustom-btn") Submit  

                script.
                  function checkEmail(){
                    var cont_email = document.getElementById("cont_email").value;
                    var p = cont_email.search(/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/);

                    if(p == -1){
                      document.getElementById("email-alert").style.display = "block";
                      document.getElementById("cont_email").value="";
                      document.getElementById("cont_email").focus();
                      document.getElementById("cont_email").select();

                      return false;
                    }else{
                      document.getElementById("email-alert").style.display = "none";
                      return true;
                    }
                  }  
    
    

    div(class="secondary col-md-4 col-sm-12 col-xs-12 aside-container")
      .connect
        .heading
          h4 Connect With Us
        .social-ico
          ul(class="list-inline")
            li
              a(href="https://twitter.com/codelikeninja", class="social-link", target="_blank")
                img(src="/img/twitter.png")
            li
              a(href="https://plus.google.com/b/115333740549284826302/115333740549284826302/", class="social-link", target="_blank")
                img(src="/img/google.png")
            li
              a(href="https://www.facebook.com/pages/Code-Like-Ninja/849805705099929", class="social-link", target="_blank")
                img(src="/img/facebook.png")
            li
              a(href="https://in.pinterest.com/codelikeninja/", class="social-link", target="_blank")
                img(src="/img/pinterest.png")

        .subscribe
          div(class="section-inner text-center")  
            h5 Subscribe - We dont spam
              div(class="form-group email-box",id="sub_box")
                form(action='/contact', name='contactus', id='contactus', method='post')
                  input(type=text, class="form-control email", id="sub_email" , name="sub_email", placeholder="Email", onchange="checkEmail2()")
                  input(type="submit", class="mycustom-btn2", value="Subscribe", id="subM")

                div(class="alert alert-danger col-md-8 col-sm-12 col-xs-12 incorrect-alert-box", id = "email-alert2")
                    p Invalid Email-id 

                script.
                  function checkEmail2(){
                    var sub_email = document.getElementById("sub_email").value;
                    var p = sub_email.search(/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/);

                    if(p == -1){
                      document.getElementById("email-alert2").style.display = "block";
                      document.getElementById("sub_email").value="";
                      document.getElementById("sub_email").focus();
                      document.getElementById("sub_email").select();

                      return false;
                    }else{
                      document.getElementById("email-alert2").style.display = "none";
                      return true;
                    }
                  }

          script.
            $("#subM").click(function (event) {
              event.preventDefault();
              if (checkEmail2() == true){ 
                var searchIDs = $('#sub_email').val();
                console.log("selected::::" + searchIDs);
                $('#sub_box').html('<p>Please Wait</p>');
                $.ajax({
                   url:'/contact',type:'post',
                   data:{sub_email:searchIDs},
                   success:function(response){
                      console.log("Done ajax .. "+response);
                      $('#sub_box').html('<p>Thanks for signing up!</p>');
                  }
                });
              }  
            });                                  
